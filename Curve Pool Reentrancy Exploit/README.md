All info needed to follow it si [here](https://hackmd.io/@LlamaRisk/BJzSKHNjn)

## Curve Pool Re-entrancy Exploit timeline

### July 30th

**13:10** 6,106.65 WETH ($11m) [Explained](https://blog.solidityscan.com/jpegd-hack-analysis-a5a3dc89fa4)

**14:50** 866.55 WETH ($1.6 m) and 959.71 msETH ($1.8m)

**15:34** 7,258.70 WETH ($13.6 m) and 4,821.55 alETH (9m)

**19:08** 7,193,401.77 CRV ($5.1m at time of exploit), 7,680.49 WETH ($14.2m)

**22:00** 2,879.65 ETH ($5.4m)

## Tx involved

[0xa84aa065ce61dbb1eb50ab6ae67fc31a9da50dd2c74eefd561661bfce2f1620c](https://etherscan.io/tx/0xa84aa065ce61dbb1eb50ab6ae67fc31a9da50dd2c74eefd561661bfce2f1620c)

[0xc93eb238ff42632525e990119d3edc7775299a70b56e54d83ec4f53736400964](https://etherscan.io/tx/0xc93eb238ff42632525e990119d3edc7775299a70b56e54d83ec4f53736400964)

[0xb676d789bb8b66a08105c844a49c2bcffb400e5c1cfabd4bc30cca4bff3c9801](https://etherscan.io/tx/0xb676d789bb8b66a08105c844a49c2bcffb400e5c1cfabd4bc30cca4bff3c9801)

[0x2e7dc8b2fb7e25fd00ed9565dcc0ad4546363171d5e00f196d48103983ae477c](https://etherscan.io/tx/0x2e7dc8b2fb7e25fd00ed9565dcc0ad4546363171d5e00f196d48103983ae477c)

[0xcd99fadd7e28a42a063e07d9d86f67c88e10a7afe5921bd28cd1124924ae2052](https://etherscan.io/tx/0xcd99fadd7e28a42a063e07d9d86f67c88e10a7afe5921bd28cd1124924ae2052)

## Exploit

[One explanation](https://twitter.com/EigenPhi/status/1686017135644962818)

The root cause was in fact a 0-day compiler bug in certain older versions of Vyper, the language Curveâ€™s contracts are written in.
A misalignment of storage slots between two functions (add_liquidity and remove_liquidity) causes a malfunction in the nonreentrant guard. This allows the attacker/s to re-enter the transaction between these two functions in order to manipulated LP token prices and drain the pool. [REKT](https://rekt.news/curve-vyper-rekt/)

(Fixing Bug)[https://github.com/vyperlang/vyper/pull/2391]

